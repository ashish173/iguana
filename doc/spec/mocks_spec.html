<!DOCTYPE html><html lang="en"><head><title>spec/mocks_spec</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="spec/mocks_spec"><meta name="groc-project-path" content="spec/mocks_spec.js"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path">spec/mocks_spec.js</div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;IguanaMock&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="kd">var</span> <span class="nx">myApp</span><span class="p">,</span> <span class="nx">Iguana</span><span class="p">,</span> <span class="nx">Item</span><span class="p">,</span> <span class="nx">$controller</span><span class="p">,</span> <span class="nx">scope</span><span class="p">,</span> <span class="nx">$window</span><span class="p">;</span>
    
    <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h1 id="testing">Testing</h1>

<p>The dist folder of iguana includes a file for use in testing called iguana-mock.js.
You will need to include that file when running tests in order to use the features 
described here.</p></div></div><div class="code"><div class="wrapper">        <span class="nx">myApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Iguana&#39;</span><span class="p">]);</span>

        <span class="nx">myApp</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">&#39;Item&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Iguana</span><span class="p">){</span>
            
            <span class="k">return</span> <span class="nx">Iguana</span><span class="p">.</span><span class="nx">subclass</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">setCollection</span><span class="p">(</span><span class="s1">&#39;items&#39;</span><span class="p">);</span>
            <span class="p">});</span>
            
        <span class="p">});</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The following examples test a controller that handles all of
the api calls for our Item model</p></div></div><div class="code"><div class="wrapper">        <span class="nx">myApp</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;ItemController&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Item</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">,</span> <span class="nx">$window</span><span class="p">){</span>
            
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">itemList</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">item</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            
            <span class="kd">function</span> <span class="nx">onError</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
            <span class="p">}</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">show</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">Item</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
                    <span class="c1">//success callback</span>
                    <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
                        <span class="nx">$scope</span><span class="p">.</span><span class="nx">item</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">meta</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">},</span> 
                    <span class="c1">//error callback</span>
                    <span class="nx">onError</span>
                <span class="p">);</span>
            <span class="p">};</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">index</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">Item</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="nx">query</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
                    <span class="c1">//success callback</span>
                    <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
                        <span class="nx">$scope</span><span class="p">.</span><span class="nx">itemList</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">meta</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">},</span> 
                    <span class="c1">//error callback</span>
                    <span class="nx">onError</span>
                <span class="p">);</span>
            <span class="p">};</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">save</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span>
                        <span class="c1">//success callback</span>
                        <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
                            <span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Item saved!&quot;</span><span class="p">);</span>
                            <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">meta</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">},</span> 
                        <span class="c1">//error callback</span>
                        <span class="nx">onError</span>
                    <span class="p">);</span>
                <span class="p">}</span>
            <span class="p">};</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">destroy</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span>
                        <span class="c1">//success callback</span>
                        <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
                            <span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Item deleted!&quot;</span><span class="p">);</span>
                            <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">meta</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">},</span> 
                        <span class="c1">//error callback</span>
                        <span class="nx">onError</span>
                    <span class="p">);</span>
                <span class="p">}</span>
            <span class="p">};</span>
        <span class="p">});</span> 
        
        <span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">);</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="setup">Setup</h3>

<p>Make sure to inject MockIguana, which will add some helper
methods (i.e. 'expect') onto all Iguana classes.  You don't need
to do anything with MockIguana; simply injecting it is sufficient     </p></div></div><div class="code"><div class="wrapper">        <span class="nx">inject</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">_Iguana_</span><span class="p">,</span> <span class="nx">_Item_</span><span class="p">,</span> <span class="nx">_$controller_</span><span class="p">,</span> <span class="nx">$rootScope</span><span class="p">,</span> <span class="nx">MockIguana</span><span class="p">,</span> <span class="nx">_$window_</span><span class="p">){</span>
            <span class="nx">Iguana</span> <span class="o">=</span> <span class="nx">_Iguana_</span><span class="p">;</span>
            <span class="nx">$controller</span> <span class="o">=</span> <span class="nx">_$controller_</span><span class="p">;</span>
            <span class="nx">scope</span> <span class="o">=</span> <span class="nx">$rootScope</span><span class="p">.</span><span class="nx">$new</span><span class="p">();</span>
            <span class="nx">Item</span> <span class="o">=</span> <span class="nx">_Item_</span><span class="p">;</span>
            <span class="nx">$window</span> <span class="o">=</span> <span class="nx">_$window_</span><span class="p">;</span>
            <span class="nx">spyOn</span><span class="p">(</span><span class="nx">$window</span><span class="p">,</span> <span class="s1">&#39;alert&#39;</span><span class="p">);</span>
            </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Use the mock adapter, which will 
allow you to mock out all of the api calls.</p></div></div><div class="code"><div class="wrapper">            <span class="nx">Iguana</span><span class="p">.</span><span class="nx">setAdapter</span><span class="p">(</span><span class="s1">&#39;Iguana.Mock.Adapter&#39;</span><span class="p">);</span>
            
        <span class="p">});</span>
        

        
    <span class="p">});</span>
    
    </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="mocking-basics">Mocking Basics</h2></div></div></div><div class="segment"><div class="code"><div class="wrapper">    <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;expect/call/fush should work&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>In most cases, making mock api calls will involve 3 steps.     </p></div></div><div class="code"><div class="wrapper">        <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>First, call expect() to indicate that you expect a method to be called ...</p></div></div><div class="code"><div class="wrapper">        <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>... then, run your code that is going to call the method ...</p></div></div><div class="code"><div class="wrapper">        <span class="nx">controller</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>... and last, call flush() to mock out the returning of the request.</p></div></div><div class="code"><div class="wrapper">        <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeUndefined</span><span class="p">();</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
    <span class="p">});</span>
    </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="show">Show</h2></div></div></div><div class="segment"><div class="code"><div class="wrapper">    <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;mocking show&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="basic-expectcallflush">Basic expect/call/flush</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with no special features set&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>  
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeUndefined</span><span class="p">();</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
        <span class="p">});</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="tobecalledwith">toBeCalledWith</h3>

<p>You can indicate the arguments you expect to be passed to the
method with <em>toBeCalledWith</em></p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with toBeCalledWith&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">).</span><span class="nx">toBeCalledWith</span><span class="p">(</span><span class="s1">&#39;someId&#39;</span><span class="p">);</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;someId&#39;</span><span class="p">);</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeUndefined</span><span class="p">();</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
        <span class="p">});</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="returns">returns</h3>

<p>You can indicate the response that comes back from the server</p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with returns and a full response&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">).</span><span class="nx">returns</span><span class="p">({</span>
                <span class="nx">result</span><span class="o">:</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">},</span> 
                <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span><span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;some metadata came back&#39;</span><span class="p">}</span>
            <span class="p">});</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeUndefined</span><span class="p">();</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="s1">&#39;some metadata came back&#39;</span><span class="p">);</span>
        <span class="p">});</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>If you don't expect any metadata, then you can just pass the result
to <em>returns</em></p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with returns and just a result hash&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">).</span><span class="nx">returns</span><span class="p">({</span><span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">});</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeUndefined</span><span class="p">();</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
        <span class="p">});</span>        
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>You can pass an instance instead of a hash to returns</p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with returns and just a result instance&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">Item</span><span class="p">.</span><span class="k">new</span><span class="p">({</span><span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">).</span><span class="nx">returns</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeUndefined</span><span class="p">();</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
            </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Note: the instance that comes back has the same attributes
as the instance that was passed in, but it is not
the same object.</p></div></div><div class="code"><div class="wrapper">            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">});</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="returnsmeta">returnsMeta</h2>

<p>If you just care about the metadata, then you can set it with
<em>returnsMeta</em></p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with returnsMeta&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">).</span><span class="nx">returnsMeta</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;some metadata came back&#39;</span><span class="p">});</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeUndefined</span><span class="p">();</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="s1">&#39;some metadata came back&#39;</span><span class="p">);</span>
        <span class="p">});</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="fails">fails</h2>

<p>If you want the api call to fail, you can call <em>fail</em></p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">).</span><span class="nx">fails</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;An Error&#39;</span><span class="p">});</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="s1">&#39;An Error&#39;</span><span class="p">);</span>
        <span class="p">});</span>
        
    <span class="p">});</span>
    </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="mocking-index">Mocking Index</h2></div></div></div><div class="segment"><div class="code"><div class="wrapper">    <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;mocking index&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="basic-expectcallflush">Basic expect/call/flush</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with no special features set&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>In most cases, making mock api calls will involve 3 steps.     </p></div></div><div class="code"><div class="wrapper">            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">);</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">index</span><span class="p">();</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toEqual</span><span class="p">([]);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
        <span class="p">});</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="tobecalledwith">toBeCalledWith</h3>

<p>You can indicate the arguments you expect to be passed to the
method with <em>toBeCalledWith</em></p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with toBeCalledWith&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">).</span><span class="nx">toBeCalledWith</span><span class="p">(</span><span class="s1">&#39;someQuery&#39;</span><span class="p">);</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="s1">&#39;someQuery&#39;</span><span class="p">);</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toEqual</span><span class="p">([]);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
        <span class="p">});</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="returns">returns</h3>

<p>You can indicate the response that comes back from the server</p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with returns and a full response&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">).</span><span class="nx">returns</span><span class="p">({</span>
                <span class="nx">result</span><span class="o">:</span> <span class="p">[{</span><span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">}],</span> 
                <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span><span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;some metadata came back&#39;</span><span class="p">}</span>
            <span class="p">});</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">index</span><span class="p">();</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toEqual</span><span class="p">([]);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="s1">&#39;some metadata came back&#39;</span><span class="p">);</span>
        <span class="p">});</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>If you don't expect any metadata, then you can just pass the result
to <em>returns</em></p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with returns and just a result hash&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">).</span><span class="nx">returns</span><span class="p">([{</span><span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">}]);</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toEqual</span><span class="p">([]);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
        <span class="p">});</span>        
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>You can pass a list of instances instead of a hash to returns</p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with returns and just a list of result instances&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="nx">Item</span><span class="p">.</span><span class="k">new</span><span class="p">({</span><span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">})];</span>
            <span class="kd">var</span> <span class="nx">ex</span> <span class="o">=</span> <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">).</span><span class="nx">returns</span><span class="p">(</span><span class="nx">items</span><span class="p">);</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">index</span><span class="p">();</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toEqual</span><span class="p">([]);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">foo</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
            </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Note: the instance that comes back has the same attributes
as the instance that was passed in, but it is not
the same object.</p></div></div><div class="code"><div class="wrapper">            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="p">});</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="returnsmeta">returnsMeta</h2>

<p>If you just care about the metadata, then you can set it with
<em>returnsMeta</em></p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with returnsMeta&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">).</span><span class="nx">returnsMeta</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;some metadata came back&#39;</span><span class="p">});</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">index</span><span class="p">();</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toEqual</span><span class="p">([]);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">constructor</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">Item</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="s1">&#39;some metadata came back&#39;</span><span class="p">);</span>
        <span class="p">});</span>
        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="fails">fails</h2>

<p>If you want the api call to fail, you can call <em>fail</em></p></div></div><div class="code"><div class="wrapper">        <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should work with fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s2">&quot;ItemController&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">});</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">).</span><span class="nx">fails</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;An Error&#39;</span><span class="p">});</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">index</span><span class="p">();</span>
            <span class="nx">Item</span><span class="p">.</span><span class="nx">flush</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">itemList</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">([]);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="s1">&#39;An Error&#39;</span><span class="p">);</span>
        <span class="p">});</span>
        
    <span class="p">});</span>    
    
    
<span class="p">});</span></div></div></div></div></body></html>